{"version":3,"sources":["scripts/main.js"],"names":["game","score","document","querySelector","startButton","restartButton","gameColumns","querySelectorAll","gameCells","startMessage","winMessage","loseMessage","tbody","gameCellCount","children","leftArrow","upArrow","rightArrow","downArrow","gameStart","checkWin","map","el","innerText","some","classList","remove","checkLose","gameField","innerTextOfCells","i","j","rowsLength","columnLength","getRandomCell","max","Math","floor","random","randomIntFromInterval","min","num","randomChangedCell","column","cell","length","startGame","changedCell","add","addScore","addNumber","addCell","place","insertAdjacentHTML","removeCell","arrayCell","forEach","moveCells","placeForNewCell","addNeighborCells","arrayColumn","keyIsDown","curCell","nextCell","addNeighborColumn","curTableRow","prevRow","currentRow","curRowCell","cellsUp","previousTableChild","currentTableChild","addEventListener","body","key","reverse","lastElementChild"],"mappings":"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","file":"main.a62fdbe4.js","sourceRoot":"..\\src","sourcesContent":["'use strict';\n\nconst score = document.querySelector('.game-score');\nconst startButton = document.querySelector('.start');\nconst restartButton = document.querySelector('.restart');\nlet gameColumns = document.querySelectorAll('.field-row');\nlet gameCells = document.querySelectorAll('.field-cell');\nconst startMessage = document.querySelector('.message-start');\nconst winMessage = document.querySelector('.message-win');\nconst loseMessage = document.querySelector('.message-lose');\nconst tbody = document.querySelector('tbody');\nconst gameCellCount = gameColumns[0].children;\nlet game;\nconst leftArrow = 'ArrowLeft';\nconst upArrow = 'ArrowUp';\nconst rightArrow = 'ArrowRight';\nconst downArrow = 'ArrowDown';\nlet gameStart = false;\n\n// #region ending game\nfunction checkWin() {\n  if ([...gameCells].map(el => el.innerText)\n    .some(el => el === '2048')) {\n    winMessage.classList.remove('hidden');\n  }\n};\n\nfunction checkLose(gameField) {\n  const rowsLength = 4;\n  const columnLength = 4;\n  const innerTextOfCells = [...gameCells].map(el => el.innerText);\n\n  if (innerTextOfCells\n    .some(el => el === '2048' || el === '')) {\n    return;\n  }\n\n  for (let i = 0; i < columnLength; i++) {\n    for (let j = 0; j < rowsLength - 1; j++) {\n      if (gameField.children[i].children[j].innerText\n          === gameField.children[i].children[j + 1].innerText) {\n        return;\n      }\n    }\n  }\n\n  for (let i = 0; i < columnLength - 1; i++) {\n    for (let j = 0; j < rowsLength; j++) {\n      if (gameField.children[i].children[j].innerText\n        === gameField.children[i + 1].children[j].innerText) {\n        return;\n      }\n    }\n  }\n\n  loseMessage.classList.remove('hidden');\n};\n\n// #endregion\n\n// #region randomizers\nfunction getRandomCell(max) {\n  return Math.floor(Math.random() * max);\n};\n\nfunction randomIntFromInterval(min, max) {\n  const num = Math.floor(Math.random() * (max - min + 1) + min);\n\n  if (num !== 4) {\n    return 2;\n  }\n\n  return 4;\n}\n\nfunction randomChangedCell() {\n  game = {\n    column: 0,\n    cell: 0,\n  };\n\n  game.column = getRandomCell(gameColumns.length);\n  game.cell = getRandomCell(gameCellCount.length);\n\n  if (gameColumns[game.column].children[game.cell].innerText !== '') {\n    randomChangedCell();\n  }\n}\n\n// #endregion\n\nfunction startGame() {\n  randomChangedCell();\n\n  const changedCell = gameColumns[game.column].children[game.cell];\n\n  changedCell.innerText = 2;\n  changedCell.classList.add('field-cell--2');\n  gameCells = document.querySelectorAll('.field-cell');\n}\n\n// #region game logic\n\nfunction addScore(num) {\n  score.innerText = +score.innerText + num;\n}\n\nfunction addNumber() {\n  randomChangedCell();\n\n  const changedCell = gameColumns[game.column].children[game.cell];\n\n  changedCell.innerText = randomIntFromInterval(1, 10);\n  changedCell.classList.add(`field-cell--${changedCell.innerText}`);\n}\n\nfunction addCell(column, place) {\n  column.insertAdjacentHTML(`${place}`, `\n    <td class=\"field-cell\"></td>\n  `);\n};\n\nfunction removeCell(arrayCell) {\n  [...gameColumns].forEach(column => {\n    arrayCell.forEach(cell => {\n      if (cell.innerText === '') {\n        cell.remove();\n        gameColumns = document.querySelectorAll('.field-row');\n      }\n    });\n  });\n\n  gameCells = document.querySelectorAll('.field-cell');\n}\n\nfunction moveCells(arrayCell, placeForNewCell) {\n  removeCell(arrayCell);\n\n  if ([...gameCells].some(el => el.innerText === '')) {\n    removeCell(arrayCell);\n  }\n\n  [...gameColumns].forEach(column => {\n    if (column.children.length < 4) {\n      while (column.children.length < 4) {\n        addCell(column, placeForNewCell);\n      }\n    }\n  });\n\n  gameCells = document.querySelectorAll('.field-cell');\n}\n\nfunction addNeighborCells(arrayColumn, keyIsDown) {\n  arrayColumn.forEach(column => {\n    for (let i = 0; i < column.children.length - 1; i++) {\n      const curCell = column.children[i];\n      const nextCell = column.children[i + 1];\n\n      if (curCell.innerText === nextCell.innerText\n        && curCell.innerText >= 2) {\n        if (keyIsDown === 'left') {\n          curCell.classList\n            .remove(`field-cell--${curCell.innerText}`);\n\n          curCell.innerText = (curCell.innerText * 2);\n\n          curCell.classList\n            .add(`field-cell--${curCell.innerText}`);\n\n          nextCell.innerText = '';\n          nextCell.classList = 'field-cell';\n\n          addScore(+curCell.innerText);\n\n          break;\n        }\n\n        if (keyIsDown === 'right') {\n          nextCell.classList\n            .remove(`field-cell--${nextCell.innerText}`);\n\n          nextCell.innerText\n            = (nextCell.innerText * 2);\n\n          nextCell.classList\n            .add(`field-cell--${nextCell.innerText}`);\n\n          curCell.innerText = '';\n          curCell.classList = 'field-cell';\n\n          addScore(+nextCell.innerText);\n\n          break;\n        }\n      }\n    }\n    moveCells(arrayColumn);\n  });\n}\n\nfunction addNeighborColumn(arrayColumn, keyIsDown) {\n  for (let curTableRow = 1; curTableRow < arrayColumn.length; curTableRow++) {\n    if (arrayColumn[curTableRow - 1] !== null) {\n      const prevRow = arrayColumn[curTableRow - 1].children;\n      const currentRow = arrayColumn[curTableRow].children;\n\n      for (let curRowCell = 0;\n        curRowCell < prevRow.length; curRowCell++) {\n        if (prevRow[curRowCell].innerText\n          === currentRow[curRowCell].innerText\n            && prevRow[curRowCell].innerText !== '') {\n          prevRow[curRowCell].innerText\n            = (prevRow[curRowCell].innerText * 2);\n\n          prevRow[curRowCell].classList\n            .add(`field-cell--${prevRow[curRowCell].innerText}`);\n\n          currentRow[curRowCell].innerText = '';\n\n          currentRow[curRowCell].classList\n            = 'field-cell';\n\n          addScore(+prevRow[curRowCell].innerText);\n        }\n      }\n    }\n    gameCells = document.querySelectorAll('.field-cell');\n  };\n}\n\nfunction cellsUp(arrayColumn) {\n  for (let curTableRow = arrayColumn.length - 1;\n    curTableRow > 0; curTableRow--) {\n    for (let curRowCell = 0;\n      curRowCell < arrayColumn[curTableRow].children.length; curRowCell++) {\n      const previousTableChild = arrayColumn[curTableRow - 1]\n        .children[curRowCell];\n      const currentTableChild = arrayColumn[curTableRow].children[curRowCell];\n\n      if (previousTableChild.innerText === '') {\n        previousTableChild.innerText\n          = currentTableChild.innerText;\n\n        previousTableChild.classList\n          .add(`field-cell--${previousTableChild.innerText}`);\n\n        currentTableChild.innerText = '';\n        currentTableChild.classList = 'field-cell';\n      }\n    }\n  }\n}\n\n// #endregion\n\nstartButton.addEventListener('click', () => {\n  startGame();\n  startGame();\n  gameStart = true;\n\n  startButton.classList.add('hidden');\n  restartButton.classList.remove('hidden');\n  startMessage.classList.add('hidden');\n});\n\ndocument.body.addEventListener('keydown', (el) => {\n  if (el.key === leftArrow) {\n    if (gameStart) {\n      moveCells([...gameCells], 'beforeend');\n\n      addNeighborCells([...gameColumns], 'left');\n\n      addNumber();\n      gameCells = document.querySelectorAll('.field-cell');\n    }\n  };\n\n  if (el.key === rightArrow) {\n    if (gameStart) {\n      moveCells([...gameCells].reverse(), 'afterbegin');\n\n      addNeighborCells([...gameColumns].reverse(), 'right');\n\n      addNumber();\n      gameCells = document.querySelectorAll('.field-cell');\n    }\n  }\n\n  if (el.key === upArrow) {\n    if (gameStart) {\n      cellsUp([...gameColumns]);\n\n      addNeighborColumn([...gameColumns], 'top');\n\n      addNumber();\n      gameCells = document.querySelectorAll('.field-cell');\n    }\n  }\n\n  if (el.key === downArrow) {\n    if (gameStart) {\n      cellsUp([...gameColumns].reverse());\n\n      addNeighborColumn([...gameColumns].reverse(), 'down');\n\n      addNumber();\n      gameCells = document.querySelectorAll('.field-cell');\n    }\n  }\n\n  checkLose(tbody);\n  checkWin();\n});\n\nrestartButton.addEventListener('click', () => {\n  score.innerText = '0';\n\n  if (tbody.children.length > 4) {\n    while (tbody.children.length > 4) {\n      tbody.lastElementChild.remove();\n    }\n  }\n  loseMessage.classList.add('hidden');\n\n  [...gameCells].forEach(cell => {\n    cell.innerText = '';\n    cell.classList = 'field-cell';\n  });\n\n  startGame();\n  startGame();\n});\n"]}